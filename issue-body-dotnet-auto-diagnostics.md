Problem\n常见 .NET 故障（内存泄漏、CPU 高、死锁、慢方法、意外退出）需事后人工多工具组合定位。\n\nInsight\n利用 EventPipe / DiagnosticServer 统一订阅关键事件与指标，阈值触发自动抓取 dump/trace 并执行模式分析。\n\nConcept\n常驻或 sidecar 探针：进程发现 → 事件订阅(GC/CPU/Exception/ThreadBlocking) → 阈值规则 → 触发 dump/trace/堆快照 → 分析(内存热点/锁竞争/Top 方法/死锁图) → 报告(JSON+Markdown)。\n\nImpact\n缩短发现到定位时间；减少人工介入；形成性能与故障趋势基线。\n\nFeasibility\n依赖 ClrMD, EventPipe, dotnet-monitor 机制；跨平台 .NET6+ 支持；需控制采样避免性能下降。风险：误报、权限（Linux ptrace）。\n\nEvolution\nP1: 事件订阅 + 阈值触发 dump/trace\nP2: 基础堆/CPU 统计 + 报告\nP3: 死锁检测 + 慢方法分位图\nP4: 趋势存储 + 告警\nP5: 前端可视化 + 优化建议\n\nRisks\nperf-overhead, false-positive, platform-compat\n\nNext Step\n列出问题类型与对应事件/API。\n\nSource File: ideas/2025-10-24-dotnet-auto-diagnostics.md